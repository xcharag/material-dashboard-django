{% load i18n static admin_material %}
{% get_current_language as LANGUAGE_CODE %}
{% get_current_language_bidi as LANGUAGE_BIDI %}
{% get_direction as direction %}
{% get_admin_setting as admin_setting %}
<!DOCTYPE html>
<html lang="en">

<head>
    {% include "includes/head.html" %}
    {% block extrastyle %}{% endblock extrastyle %}
    {% block extrahead %}{% endblock extrahead %}
</head>

<body class="g-sidenav-show  bg-gray-100">

  {% block sidebar %}
    {% include "includes/sidebar.html" %}
  {% endblock sidebar %}

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    {% block navigation %}
      {% include "includes/navigation.html" %}
    {% endblock navigation %}

    {% block content %}{% endblock content %}
  </main>

  {% block configurator %}
    {% include "includes/configurator.html" %}
  {% endblock configurator %}

  {% include "includes/scripts.html" %}

  {% block extra_js %}{% endblock extra_js %}

    <!-- Add this to templates/layouts/base.html just before the closing </body> tag -->
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 11">
      <div id="toastContainer">
        {% if messages %}
          {% for message in messages %}
            <div class="toast show mb-2" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="toast-header bg-gradient-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} text-white">
                <i class="material-symbols-rounded me-2">notifications</i>
                <strong class="me-auto">Notificaci√≥n</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
              </div>
              <div class="toast-body">
                {{ message }}
              </div>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>

    <script>
      // Auto-dismiss toasts after 5 seconds
      document.addEventListener('DOMContentLoaded', function() {
        const toasts = document.querySelectorAll('.toast');
        toasts.forEach(toast => {
          setTimeout(function() {
            const bsToast = new bootstrap.Toast(toast);
            bsToast.hide();
          }, 5000);
        });
      });
    </script>
    </body>

</html>